@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
  margin: 0;
  padding: 0;
}

body {
  @apply bg-slate-950 text-white;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* ==================== */
/*  BASE ANIMATIONS     */
/* ==================== */

@layer utilities {
  .animate-fade-slide-down {
    animation: fade-slide-down 0.6s ease-out both;
  }

  .animate-pop {
    animation: pop-in 0.4s ease-out both;
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease-out both;
  }

  .animate-crown-glow {
    animation: crown-glow 2.4s ease-in-out infinite;
  }
}

@keyframes fade-slide-down {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes pop-in {
  0% { transform: scale(0.8); opacity: 0; }
  70% { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); }
}

@keyframes fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes crown-glow {
  0% {
    transform: scale(1);
    filter: drop-shadow(0 0 0px rgba(222,197,91,0));
  }
  25% {
    transform: scale(1.03);
    filter: drop-shadow(0 0 4px rgba(222,197,91,0.4));
  }
  50% {
    transform: scale(1.06);
    filter: drop-shadow(0 0 8px rgba(222,197,91,0.75));
  }
  75% {
    transform: scale(1.03);
    filter: drop-shadow(0 0 4px rgba(222,197,91,0.4));
  }
  100% {
    transform: scale(1);
    filter: drop-shadow(0 0 0px rgba(222,197,91,0));
  }
}

/* Exercise image crossfade */
.fade-image {
  opacity: 0;
  transition: opacity 0.35s ease;
}
.fade-image.visible {
  opacity: 1;
}

/* Fullscreen GO flash */
.go-flash {
  position: fixed;
  inset: 0;
  background: white;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  animation: flashGo 150ms ease-out;
}
@keyframes flashGo {
  0% { opacity: 0.9; }
  100% { opacity: 0; }
}

/* Timer pulse synced to beep */
.timer-pulse {
  animation: timerPulse 180ms ease-out;
}
@keyframes timerPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.07); }
  100% { transform: scale(1); }
}

/* =========================== */
/*   CINEMATIC INTRO EFFECTS   */
/* =========================== */

/* Radial gold burst */
.cinematic-burst {
  z-index: 2;
  background: radial-gradient(circle, rgba(222,197,91,0.22) 0%, rgba(0,0,0,0) 65%);
  animation: burst-fade 1.3s ease-out forwards;
  opacity: 0;
}
@keyframes burst-fade {
  0% {
    opacity: 0;
    transform: scale(0.85);
  }
  40% {
    opacity: 0.9;
    transform: scale(1.1);
  }
  100% {
    opacity: 0;
    transform: scale(1.3);
  }
}

/* Gold particles floating upward */
.particle-layer {
  z-index: 3;
}
.particle-layer::before,
.particle-layer::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(rgba(222,197,91,0.7) 2px, transparent 3px),
    radial-gradient(rgba(222,197,91,0.5) 1px, transparent 3px);
  background-size: 6px 6px, 4px 4px;
  opacity: 0.45;
  animation: particle-rise 2.5s linear infinite;
}
@keyframes particle-rise {
  0% { transform: translateY(20px); }
  100% { transform: translateY(-40px); }
}

/* Crown dramatic zoom intro */
@keyframes crown-zoom {
  0% { opacity: 0; transform: scale(0.55); }
  55% { opacity: 1; transform: scale(1.22); }
  100% { opacity: 1; transform: scale(1); }
}
.animate-crown-zoom {
  animation: crown-zoom 1.1s cubic-bezier(0.16, 0.9, 0.25, 1) forwards;
}

/* Crown glow pulse (cinematic) */
.cinematic-crown-glow {
  animation: crown-pulse 2.2s.ease-in-out infinite;
}
@keyframes crown-pulse {
  0% { filter: drop-shadow(0 0 0 rgba(222,197,91,0)); }
  50% { filter: drop-shadow(0 0 12px rgba(222,197,91,0.85)); }
  100% { filter: drop-shadow(0 0 0 rgba(222,197,91,0)); }
}

/* Title slide-up fade */
@keyframes title-rise {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}
.animate-title-rise {
  animation: title-rise 0.8s ease-out 0.4s forwards;
}
.animate-title-rise-delay {
  animation: title-rise 0.8s ease-out 0.6s forwards;
}

/* Gold shimmer sweep on text */
.gold-shimmer {
  position: relative;
  overflow: hidden;
}
.gold-shimmer::after {
  content: "";
  position: absolute;
  top: 0;
  left: -150%;
  width: 150%;
  height: 100%;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(255,255,255,0.65) 50%,
    transparent 100%
  );
  transform: skewX(-20deg);
  animation: shimmer-sweep 2.2s ease-in-out 0.8s infinite;
}
@keyframes shimmer-sweep {
  0% { left: -150%; }
  100% { left: 150%; }
}

/* ========================= */
/* PARALLAX DRIFTING CROWNS  */
/* ========================= */

.parallax-wrap {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: 1;
  pointer-events: none;
}

.parallax-layer {
  position: absolute;
  width: 180px;
  height: 180px;
  opacity: 0.05;
  background-image: url('/icons/empire-crown.png');
  background-size: contain;
  background-repeat: no-repeat;
  animation: parallax-float linear infinite;
}

/* Slow far layer */
.parallax-slow {
  top: 10%;
  left: 15%;
  --pz-scale: 0.65;
}

/* Medium mid-depth */
.parallax-mid {
  top: 40%;
  left: 70%;
  --pz-scale: 0.85;
}

/* Fast foreground-ish */
.parallax-fast {
  top: 70%;
  left: 8%;
  --pz-scale: 1.1;
}

@keyframes parallax-float {
  0% {
    transform: translateY(0px) rotate(0deg) scale(var(--pz-scale));
  }
  50% {
    transform: translateY(-20px) rotate(5deg) scale(var(--pz-scale));
  }
  100% {
    transform: translateY(0px) rotate(0deg) scale(var(--pz-scale));
  }
}
